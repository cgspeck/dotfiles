
common() {
  # ruby
  export RUBY_ENV=development
  # python
  # export workon_home=~/.virtualenvs
  #source /opt/boxen/homebrew/bin/virtualenvwrapper.sh

  # aliases
  source ~/.bash_custom_aliases
  # z directory jumper
  source ~/src/z/z.sh

  alias heart="echo -e \"\xe2\x9d\xa4\""
  export AWS_DEFAULT_REGION=us-east-1
  export AWS_REGION=us-east-1
}

common_tail() {
  eval "$(nodenv init -)"
}

osx() {
  if [ -f "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh" ]; then
    __GIT_PROMPT_DIR=$(brew --prefix)/opt/bash-git-prompt/share
    source "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh"
  fi
  source /usr/local/opt/chruby/share/chruby/chruby.sh
  source /usr/local/opt/chruby/share/chruby/auto.sh
}

linux() {
  echo "TODO: set chruby (chruby.sh & auto.sh) source lines"
}

common

case "$OSTYPE" in
  darwin*)
    echo "Setting up OSX (Homebrew) environment"
    osx
  ;;
  linux*)
    echo "Setting up Ubuntu environment"
    ubuntu
  ;;
  *)
    echo "unknown: $OSTYPE"
  ;;
esac

common_tail

[ -r ~/.bash_local ] && source ~/.bash_local
